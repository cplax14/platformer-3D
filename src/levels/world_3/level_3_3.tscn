[gd_scene load_steps=16 format=3 uid="uid://level_3_3_scene"]

[ext_resource type="PackedScene" uid="uid://player_scene" path="res://src/characters/player/player.tscn" id="1_player"]
[ext_resource type="PackedScene" uid="uid://follow_camera_scene" path="res://src/systems/camera/follow_camera.tscn" id="2_camera"]
[ext_resource type="PackedScene" uid="uid://hud_scene" path="res://src/ui/hud.tscn" id="3_hud"]
[ext_resource type="PackedScene" uid="uid://pause_menu_scene" path="res://src/ui/pause_menu.tscn" id="4_pause"]
[ext_resource type="PackedScene" uid="uid://coin_scene" path="res://src/objects/collectibles/coin.tscn" id="5_coin"]
[ext_resource type="PackedScene" uid="uid://star_scene" path="res://src/objects/collectibles/star.tscn" id="7_star"]
[ext_resource type="PackedScene" uid="uid://checkpoint_scene" path="res://src/objects/hazards/checkpoint.tscn" id="11_checkpoint"]
[ext_resource type="PackedScene" uid="uid://grapple_anchor_scene" path="res://src/objects/interactables/grapple_anchor.tscn" id="12_anchor"]
[ext_resource type="PackedScene" uid="uid://level_end_scene" path="res://src/objects/collectibles/level_end.tscn" id="14_end"]
[ext_resource type="Script" path="res://src/levels/level_base.gd" id="15_base"]
[ext_resource type="PackedScene" path="res://src/characters/enemies/slime/slime.tscn" id="16_slime"]
[ext_resource type="PackedScene" path="res://src/objects/hazards/breakable_crate.tscn" id="17_crate"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_1"]
sky_top_color = Color(0.15, 0.25, 0.6, 1.0)
sky_horizon_color = Color(0.45, 0.35, 0.7, 1.0)
ground_bottom_color = Color(0.3, 0.2, 0.5, 1.0)
ground_horizon_color = Color(0.5, 0.4, 0.65, 1.0)

[sub_resource type="Sky" id="Sky_1"]
sky_material = SubResource("ProceduralSkyMaterial_1")

[sub_resource type="Environment" id="Environment_1"]
background_mode = 2
sky = SubResource("Sky_1")
ambient_light_source = 2
ambient_light_color = Color(0.5, 0.45, 0.7, 1.0)
ambient_light_energy = 0.4
tonemap_mode = 2

[node name="Level_3_3" type="Node3D"]
script = ExtResource("15_base")
world_id = 3
level_id = 3
fall_depth = -30.0

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_1")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.7071, 0.7071, 0, -0.7071, 0.7071, 0, 50, 0)
shadow_enabled = true
light_color = Color(0.9, 0.85, 1.0, 1.0)
light_energy = 0.7

[node name="Player" parent="." instance=ExtResource("1_player")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)

[node name="CameraRig" parent="." instance=ExtResource("2_camera")]
target_path = NodePath("../Player")

[node name="HUD" parent="." instance=ExtResource("3_hud")]
[node name="PauseMenu" parent="." instance=ExtResource("4_pause")]

; ============================================
; === SECTION 1: Triple Anchor Ascent ===
; Three-anchor chain climbing at steep angles with small platforms
; No safety nets — miss an anchor and you fall
; ============================================

; Small starting platform
[node name="S1_Start" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.5, 0)
use_collision = true
collision_layer = 2
collision_mask = 0
size = Vector3(10, 1, 8)

[node name="S1_Coin1" parent="." instance=ExtResource("5_coin")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, -2)

; First anchor — steep angle up and forward
[node name="S1_Anchor1" parent="." instance=ExtResource("12_anchor")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 8, -10)

; Tiny rest ledge
[node name="S1_Ledge1" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 6.5, -16)
use_collision = true
collision_layer = 2
collision_mask = 0
size = Vector3(6, 1, 5)

[node name="S1_Coin2" parent="." instance=ExtResource("5_coin")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 8, -13)

; Second anchor — continues steep climb, offset right
[node name="S1_Anchor2" parent="." instance=ExtResource("12_anchor")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5, 15, -24)

; Tiny rest ledge offset right
[node name="S1_Ledge2" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5, 13.5, -30)
use_collision = true
collision_layer = 2
collision_mask = 0
size = Vector3(6, 1, 5)

[node name="S1_Coin3" parent="." instance=ExtResource("5_coin")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5, 15, -27)

; Third anchor — back to center and higher
[node name="S1_Anchor3" parent="." instance=ExtResource("12_anchor")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, 22, -38)

; Landing platform at top of climb
[node name="S1_TopPlatform" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, 20.5, -44)
use_collision = true
collision_layer = 2
collision_mask = 0
size = Vector3(8, 1, 6)

[node name="S1_Slime1" parent="." instance=ExtResource("16_slime")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, 21, -44)

[node name="Checkpoint1" parent="." instance=ExtResource("11_checkpoint")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, 21, -44)

; ============================================
; === SECTION 2: Wall Run Canyon ===
; Two tall parallel walls with anchors between them
; Must wall run -> wall jump -> grapple -> wall run on other side -> repeat
; ============================================

; Launch platform into canyon
[node name="S2_LaunchPlatform" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 20.5, -56)
use_collision = true
collision_layer = 2
collision_mask = 0
size = Vector3(8, 1, 6)

; Left canyon wall (long, tall)
[node name="S2_WallL" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8, 26, -72)
use_collision = true
collision_layer = 2
collision_mask = 0
size = Vector3(1, 16, 30)

; Right canyon wall (long, tall)
[node name="S2_WallR" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 8, 26, -72)
use_collision = true
collision_layer = 2
collision_mask = 0
size = Vector3(1, 16, 30)

; Anchor 1 — center of canyon, higher up
; Player wall runs on left wall, wall jumps, grapples to this
[node name="S2_Anchor1" parent="." instance=ExtResource("12_anchor")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 27, -65)

; Anchor 2 — further into canyon, higher
; After grapple, player lands near right wall, wall runs, wall jumps, grapples
[node name="S2_Anchor2" parent="." instance=ExtResource("12_anchor")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 31, -78)

; Coins along the canyon showing the path
[node name="S2_Coin1" parent="." instance=ExtResource("5_coin")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5, 24, -62)

[node name="S2_Coin2" parent="." instance=ExtResource("5_coin")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 28, -68)

[node name="S2_Coin3" parent="." instance=ExtResource("5_coin")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5, 29, -74)

[node name="S2_Coin4" parent="." instance=ExtResource("5_coin")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 32, -80)

; Exit platform at top of canyon
[node name="S2_ExitPlatform" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 30.5, -90)
use_collision = true
collision_layer = 2
collision_mask = 0
size = Vector3(10, 1, 6)

[node name="Checkpoint2" parent="." instance=ExtResource("11_checkpoint")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 31, -90)

; Star 1: At the very top of the canyon — must grapple-release with upward momentum
; from Anchor2, then double jump to reach a tiny floating platform above the exit
[node name="S2_StarPlatform" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 37.5, -82)
use_collision = true
collision_layer = 2
collision_mask = 0
size = Vector3(5, 1, 5)

[node name="Star1" parent="." instance=ExtResource("7_star")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 39, -82)
star_index = 1

; ============================================
; === SECTION 3: Grapple Chain Sprint ===
; Four anchors in a row over a bottomless pit — no platforms between
; Must grapple -> release with momentum -> immediately grapple next
; Pure grapple mastery section
; ============================================

; Launch platform
[node name="S3_LaunchPlatform" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 30.5, -102)
use_collision = true
collision_layer = 2
collision_mask = 0
size = Vector3(8, 1, 6)

; Four anchors in a forward chain with slight height variation
; Player must grapple, release at right time, catch next anchor
[node name="S3_Anchor1" parent="." instance=ExtResource("12_anchor")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3, 35, -112)

[node name="S3_Anchor2" parent="." instance=ExtResource("12_anchor")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3, 37, -124)

[node name="S3_Anchor3" parent="." instance=ExtResource("12_anchor")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 35, -136)

[node name="S3_Anchor4" parent="." instance=ExtResource("12_anchor")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, 38, -148)

; Coins tracing the grapple chain path
[node name="S3_Coin1" parent="." instance=ExtResource("5_coin")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 34, -108)

[node name="S3_Coin2" parent="." instance=ExtResource("5_coin")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 36, -118)

[node name="S3_Coin3" parent="." instance=ExtResource("5_coin")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 36, -130)

[node name="S3_Coin4" parent="." instance=ExtResource("5_coin")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 37, -142)

; Landing after the chain
[node name="S3_Landing" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 34.5, -158)
use_collision = true
collision_layer = 2
collision_mask = 0
size = Vector3(10, 1, 8)

[node name="S3_Slime1" parent="." instance=ExtResource("16_slime")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3, 35, -158)

[node name="S3_Slime2" parent="." instance=ExtResource("16_slime")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3, 35, -156)

[node name="Checkpoint3" parent="." instance=ExtResource("11_checkpoint")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 35, -158)

; ============================================
; === SECTION 4: The Gauntlet — All Skills Required ===
; Wall run -> dash -> grapple -> wall run -> grapple -> dash
; Tight platforming with enemies on narrow ledges
; ============================================

; Starting ledge
[node name="S4_StartLedge" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 34.5, -170)
use_collision = true
collision_layer = 2
collision_mask = 0
size = Vector3(8, 1, 6)

; Left wall for wall run
[node name="S4_WallL1" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6, 37, -178)
use_collision = true
collision_layer = 2
collision_mask = 0
size = Vector3(1, 10, 12)

; Coins along wall run
[node name="S4_Coin1" parent="." instance=ExtResource("5_coin")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4, 38, -176)

[node name="S4_Coin2" parent="." instance=ExtResource("5_coin")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4, 38, -180)

; Small platform after wall run — need to dash across a gap to reach it
[node name="S4_DashTarget1" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6, 36.5, -186)
use_collision = true
collision_layer = 2
collision_mask = 0
size = Vector3(6, 1, 5)

[node name="S4_Slime1" parent="." instance=ExtResource("16_slime")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6, 37, -186)

; Grapple anchor from dash platform — steep climb
[node name="S4_Anchor1" parent="." instance=ExtResource("12_anchor")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3, 43, -194)

; Narrow ledge at grapple destination
[node name="S4_NarrowLedge1" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3, 41.5, -200)
use_collision = true
collision_layer = 2
collision_mask = 0
size = Vector3(5, 1, 5)

; Right wall for second wall run
[node name="S4_WallR1" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 8, 44, -208)
use_collision = true
collision_layer = 2
collision_mask = 0
size = Vector3(1, 10, 12)

; Coins on right wall run
[node name="S4_Coin3" parent="." instance=ExtResource("5_coin")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6, 45, -206)

[node name="S4_Coin4" parent="." instance=ExtResource("5_coin")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6, 45, -210)

; Second grapple anchor after wall run — must catch mid-air
[node name="S4_Anchor2" parent="." instance=ExtResource("12_anchor")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3, 47, -218)

; Platform after second grapple — need to dash to reach it
[node name="S4_DashTarget2" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3, 43.5, -232)
use_collision = true
collision_layer = 2
collision_mask = 0
size = Vector3(8, 1, 6)

; Coins showing dash path
[node name="S4_Coin5" parent="." instance=ExtResource("5_coin")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3, 46, -224)

[node name="S4_Coin6" parent="." instance=ExtResource("5_coin")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3, 46, -228)

[node name="S4_Slime2" parent="." instance=ExtResource("16_slime")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5, 44, -232)

[node name="S4_Slime3" parent="." instance=ExtResource("16_slime")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 44, -230)

[node name="S4_Crate1" parent="." instance=ExtResource("17_crate")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1, 44, -234)

[node name="Checkpoint4" parent="." instance=ExtResource("11_checkpoint")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3, 44, -232)

; ============================================
; === SECTION 5: Vertical Spiral Tower ===
; Ascending spiral of anchors around a central column
; 5 anchors wrapping around — must chain grapple with precise aim
; Walls on alternating sides for wall run recovery
; ============================================

; Base platform
[node name="S5_Base" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 43.5, -246)
use_collision = true
collision_layer = 2
collision_mask = 0
size = Vector3(8, 1, 6)

; Central column (cosmetic, gives sense of scale)
[node name="S5_Column" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 55, -260)
use_collision = true
collision_layer = 2
collision_mask = 0
size = Vector3(3, 30, 3)

; Spiral anchors going up around the column
; Each anchor is offset in a different direction (spiral pattern)

; Anchor 1 — forward-left from base
[node name="S5_Anchor1" parent="." instance=ExtResource("12_anchor")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -7, 48, -256)

; Small wall for recovery after anchor 1
[node name="S5_Wall1" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -10, 48, -260)
use_collision = true
collision_layer = 2
collision_mask = 0
size = Vector3(1, 8, 8)

; Anchor 2 — forward from column, higher
[node name="S5_Anchor2" parent="." instance=ExtResource("12_anchor")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 53, -268)

; Anchor 3 — forward-right, higher still
[node name="S5_Anchor3" parent="." instance=ExtResource("12_anchor")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7, 58, -264)

; Small wall for recovery after anchor 3
[node name="S5_Wall2" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 10, 58, -260)
use_collision = true
collision_layer = 2
collision_mask = 0
size = Vector3(1, 8, 8)

; Anchor 4 — back toward center, higher
[node name="S5_Anchor4" parent="." instance=ExtResource("12_anchor")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5, 63, -258)

; Anchor 5 — final, above the column
[node name="S5_Anchor5" parent="." instance=ExtResource("12_anchor")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 68, -260)

; Coins along spiral path
[node name="S5_Coin1" parent="." instance=ExtResource("5_coin")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4, 47, -252)

[node name="S5_Coin2" parent="." instance=ExtResource("5_coin")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4, 51, -264)

[node name="S5_Coin3" parent="." instance=ExtResource("5_coin")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 56, -266)

[node name="S5_Coin4" parent="." instance=ExtResource("5_coin")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3, 61, -258)

[node name="S5_Coin5" parent="." instance=ExtResource("5_coin")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 66, -260)

; Top platform — summit of the tower
[node name="S5_Summit" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 66.5, -260)
use_collision = true
collision_layer = 2
collision_mask = 0
size = Vector3(8, 1, 8)

[node name="Checkpoint5" parent="." instance=ExtResource("11_checkpoint")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 67, -260)

; ============================================
; === SECTION 6: The Final Run ===
; Long combo sequence: dash gap -> grapple pair -> wall run canyon
; -> triple grapple over void -> goal
; Enemies on every platform, no room to breathe
; ============================================

; Dash gap from summit
[node name="S6_DashPlatform" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 66.5, -278)
use_collision = true
collision_layer = 2
collision_mask = 0
size = Vector3(7, 1, 5)

[node name="S6_Slime1" parent="." instance=ExtResource("16_slime")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 67, -278)

; Two-anchor grapple climb
[node name="S6_Anchor1" parent="." instance=ExtResource("12_anchor")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 72, -286)

[node name="S6_MidLedge" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 70.5, -292)
use_collision = true
collision_layer = 2
collision_mask = 0
size = Vector3(5, 1, 5)

[node name="S6_Anchor2" parent="." instance=ExtResource("12_anchor")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3, 77, -300)

; Narrow wall run canyon
[node name="S6_WallRunEntryPlatform" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3, 74.5, -308)
use_collision = true
collision_layer = 2
collision_mask = 0
size = Vector3(6, 1, 5)

; Walls for canyon
[node name="S6_CanyonWallL" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8, 77, -318)
use_collision = true
collision_layer = 2
collision_mask = 0
size = Vector3(1, 10, 16)

[node name="S6_CanyonWallR" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 77, -318)
use_collision = true
collision_layer = 2
collision_mask = 0
size = Vector3(1, 10, 16)

; Coins through canyon
[node name="S6_Coin1" parent="." instance=ExtResource("5_coin")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5, 78, -314)

[node name="S6_Coin2" parent="." instance=ExtResource("5_coin")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 78, -320)

; Platform exiting canyon
[node name="S6_CanyonExitPlatform" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, 74.5, -330)
use_collision = true
collision_layer = 2
collision_mask = 0
size = Vector3(7, 1, 5)

[node name="S6_Slime2" parent="." instance=ExtResource("16_slime")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, 75, -330)

; Triple grapple over void to the goal
[node name="S6_Anchor3" parent="." instance=ExtResource("12_anchor")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3, 79, -340)

[node name="S6_Anchor4" parent="." instance=ExtResource("12_anchor")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4, 81, -352)

[node name="S6_Anchor5" parent="." instance=ExtResource("12_anchor")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2, 78, -364)

; Coins on the final chain
[node name="S6_Coin3" parent="." instance=ExtResource("5_coin")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 78, -336)

[node name="S6_Coin4" parent="." instance=ExtResource("5_coin")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1, 80, -346)

[node name="S6_Coin5" parent="." instance=ExtResource("5_coin")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 79, -358)

; Final combat platform with enemies
[node name="S6_FinalCombat" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 74.5, -374)
use_collision = true
collision_layer = 2
collision_mask = 0
size = Vector3(10, 1, 8)

[node name="S6_Slime3" parent="." instance=ExtResource("16_slime")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3, 75, -374)

[node name="S6_Slime4" parent="." instance=ExtResource("16_slime")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3, 75, -372)

[node name="S6_Slime5" parent="." instance=ExtResource("16_slime")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 75, -376)

[node name="S6_Crate1" parent="." instance=ExtResource("17_crate")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4, 75, -376)

[node name="S6_Crate2" parent="." instance=ExtResource("17_crate")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 75, -372)

; Goal platform
[node name="S6_GoalPlatform" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 74.5, -390)
use_collision = true
collision_layer = 2
collision_mask = 0
size = Vector3(10, 1, 8)

; Level end
[node name="LevelEnd" parent="." instance=ExtResource("14_end")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 75.5, -390)
next_world = 3
next_level = 4

; Star 2: Way off to the side of the final combat platform
; Must grapple to a hidden anchor, then wall run + dash to reach it
; Extremely tricky
[node name="S6_SecretWall" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 18, 77, -374)
use_collision = true
collision_layer = 2
collision_mask = 0
size = Vector3(1, 8, 10)

[node name="S6_SecretAnchor" parent="." instance=ExtResource("12_anchor")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 14, 79, -374)

[node name="S6_SecretPlatform" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 22, 76.5, -374)
use_collision = true
collision_layer = 2
collision_mask = 0
size = Vector3(5, 1, 5)

[node name="Star2" parent="." instance=ExtResource("7_star")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 22, 78, -374)
star_index = 2
